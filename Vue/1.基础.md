
# 1. 介绍

核心功能：数据的双向绑定。

    <script src="https://unpkg.com/vue@2.5.16/dist/vue.js"></script>    
    
# 2. vue-devtools

## 2.1. 更新node

* [Mac下彻底卸载node和npm](https://blog.csdn.net/shiquanqq/article/details/78032943)
* [升级node](https://blog.csdn.net/u010828718/article/details/52932109)
* [npm install出现"Unexpected end of JSON input while parsing near"错误解决方法](https://blog.csdn.net/ITLionWoo/article/details/78632643)

创建 npm 软链接：

    ln -s /usr/local/Cellar/node/10.4.1/libexec/lib/node_modules/npm/bin/npm-cli.js /usr/local/bin/npm

## 2.2. 安装

1. Clone this repo（https://github.com/vuejs/vue-devtools）
2. npm install (Or yarn install if you are using yarn as the package manager)
3. npm run build
4. Open Chrome extension page
5. Check "developer mode"
6. Click "load unpacked extension", and choose shells/chrome.

# 3. Vue实例

## 3.1. 创建

    var app = new Vue( {
        // 选项
    } );

## 3.2. 选项

### 3.2.1. el（挂载元素）

指定挂载Vue实例的DOM元素。

值：HTMLElement | CSS选择器

    var app = new Vue( {
        el: "#app"
    } );

可通过 `app.$el` 访问该DOM元素。

### 3.2.2. data（数据）

声明需要双向绑定的数据。Vue实例代理了data。

    var myData = {
        a: 1
    };
    var app = new Vue( {
        data: myData
    } );


### 3.2.3. methods（方法）

Vue实例代理了 methods。

在模板上，使用方法，如果没有参数，可省略括号。

### 3.2.4. filters（过滤器）

使用管道符（“|”），用于格式化文本，比如货币千位使用逗号分隔符。

    <div id="app">
        {{ price | formatPrice }}
    </div>
    <script>
        var app = new Vue( {
            el: "#app",
            data: {
                price: 1234567
            },
            filters: {
                formatPrice: function( value ) {
                    var
                        numList = ( value + "" ).split( "" ),
                        fmtValue = "",
                        i, count, len
                    ;

                    for( len = numList.length, i = len - 1, count = 1; i >= 0; i--, count++ ) {
                        fmtValue = numList[ i ] + fmtValue;
                        if ( count % 3 === 0 ) {
                            fmtValue = "," + fmtValue;
                        }
                    }

                    fmtValue = fmtValue.replace( /^,/, "" );
                    
                    return fmtValue;
                }
            }
        } );
    </script>

### 3.2.5. computed（计算属性）

模板内的表达式常用于简单的运算，当其过长或逻辑复杂时，会难以维护，计算属性可解决这个问题。

计算属性可依赖多个Vue示例的数据，只要其中任一数据变化，计算属性就会重新执行，视图也会更新。

计算属性有 getter和setter，默认使用 getter。

使用计算属性还是使用`methods`取决于你是否需要缓存，
当遍历大数组和做大量计算时 应当使用计算属性。

    <div id="app">
        <p>{{ text.split(",").reverse().join(",") }}</p>
        <p>{{ reversedText }}</p>
    </div>
    <script>
        var app = new Vue( {
            el: "#app",
            data: {
                text: "123,456"
            },
            computed: {
                reversedText: function() {
                    return this.text.split(",").reverse().join(",");
                }
            }
        } );
    </script>

### 3.2.6. 实例的生命周期

    var app = new Vue( {
        created: function() {
            // this 指向 Vue实例
        },
        mounted: function() {

        },
        beforeDestroy: function() {

        }
    } );


# 4. 插值

## 4.1. 文本插值

语法：“{{ }}”（Mustache语法）

    <div id="app">
        {{ name }}
    </div>
    <script>
        var app = new Vue( {
            el: "#app",
            data: {
                name: "吴钦飞"
            }
        } );
    </script>

## 4.2. HTML插值

使用 `v-html` 指令

    <div id="app2">
        <span v-html="link"></span>
        <!-- 
        <span><a href="#">链接</a></span>
         -->
    </div>
    <script>
        var app = new Vue( {
            el: "#app2",
            data: {
                link: "<a href='#'>链接</a>"
            }
        } );
    </script>

## 4.3. 不进行替换

使用 `v-pre` 指令

    <div id="app3">
        <span v-pre>{{ name }}</span>
    </div>
    <script>
        var app = new Vue( {
            el: "#app3",
            data: {
                name: "吴钦飞"
            }
        } );
    </script>

## 4.4. 表达式

在 `{{ }}` 中，可以使用表达式。

    <div id="app4">
        {{ number / 10 }}
        {{ isOk ? "好" : "不好" }}
        {{ text.split( "," ).reverse().join( "-" ) }}
    </div>
    <script>
        var app = new Vue( {
            el: "#app4",
            data: {
                number: 100,
                isOk: false,
                text: "123,456"
            }
        } );
    </script>


# 5. 指令

指令（directives），Vue模板中最常用的功能，带有 `v-`前缀。

职责：当表达式的值改变时，相应地将某些行为应用到DOM上。

## 5.1. 语法糖

语法糖是指在不影响功能的情况下，添加某种方法实现同样的效果，从而方便程序开发。

`v-bind` 的语法糖（缩写）：`:`（冒号）。

`v-on` 的语法糖（缩写）：`@`。

## 5.2. v-bind

动态更新HTML元素的属性。

语法：`v-bind:属性`

    <div id="app2">
        <a v-bind:href="url">链接</a>
        <img v-bind:src="src">
    </div>
    <script>
        var app = new Vue( {
            el: "#app2",
            data: {
                url: "https://www.baidu.com",
                src: "https://www.baidu.com/1.png"
            }
        } );
    </script>

### 5.2.1. 绑定 class

#### 5.2.1.1. 对象语法

使用 `v-bind:class`（即 `:class`）

    <div id="app">
        <!-- 单个class -->
        <p v-bind:class='{ "active": isActive }'></p>

        <!-- 多个class：使用计算属性  -->
        <p v-bind:class='classes'></p>

        <!-- 多个class：使用方法  -->
        <p v-bind:class='getClasses()'></p>
    </div>
    <script>
        var app = new Vue( {
            el: "#app",
            data: {
                isActive: true,
                isError: true
            },
            computed: {
                classes: function() {
                    return {
                        active: this.isActive,
                        error: this.isError
                    }
                }
            },
            methods: {
                getClasses: function() {
                    return {
                        active: this.isActive,
                        error: this.isError
                    }
                }
            }
        } );
    </script>



#### 5.2.1.2. 数组语法

常用于绑定多个class、普通对象，也可使用 data、methods、computed。

    <div id="app2">
        <!-- 单个class -->
        <p v-bind:class='[ activeCls, errorCls ]'></p>
    </div>
    <script>
        var app2 = new Vue( {
            el: "#app2",
            data: {
                activeCls: "active",
                errorCls: "error"
            }
        } );
    </script>

#### 5.2.1.3. 在组件上使用

//TODO

### 5.2.2. 绑定 style（内联样式）

使用 `v-bind:style`（即 `:style`）可以给元素绑定内联样式。

也有对象语法和数组语法，看起来很像直接在元素上写CSS。

CSS属性名称使用驼峰命名（camelCase）或短横线分隔命名（kebab-case）。

    <div id="app">
        <!-- 对象语法 -->
        <p v-bind:style='{ "font-size": fontSize + "px", "text-align": align }'>111</p>
        <p v-bind:style="styles">222</p>
        <!-- 数组语法 -->
        <p v-bind:style='[styles,computedStyles]'>333</p>
    </div>
    <script>
        var app = new Vue( {
            el: "#app",
            data: {
                fontSize: 20,
                align: "center",
                styles: {
                    "color": "red",
                    "text-align": "center"
                }
            },
            computed: {
                computedStyles: function() {
                    return {
                        "font-size": "30px"
                    }
                }
            }
        } );
    </script>

## 5.3. v-on

绑定事件监听器。

语法：`v-on:click="handleClick"`

在普通元素上，`v-on`可监听原生的DOM事件，如 click、dblclick、keydown、keyup。

    <div id="app3">
        <p v-if="show">一段文本</p>
        <button v-on:click="handleClose">显示/隐藏</button>
    </div>
    <script>
        var app3 = new Vue( {
            el: "#app3",
            data: {
                show: true
            },
            methods: {
                handleToggle: function() {
                    this.toggle();
                },
                toggle: function() {
                    // this 指向 Vue实例
                    this.show = !this.show;
                }

            }
        } );
    </script>

## 5.4. v-cloak

仅仅是一个标记，当Vue实例结束编译时会从绑定的HTML元素上移除。

    [v-cloak] {
        display: none;
    }

在一般情况下，`v-cloak` 是一个解决初始化慢导致页面闪动的最佳实践。
但在具有工程化的项目里，项目的HTML结构只有一个空的`div`元素，
剩余的内容都是由路由去挂载不同的组件完成的，所以不再需要 `v-cloak`。

## 5.5. v-once

`v-once` 是一个不需要表达式的指令，作用是定义它的元素或组件只渲染一次，包括元素的所有子节点。
首次渲染后，不再随数据的变化重新渲染，将被视为静态内容。

只有在你需要进一步优化性能时才需要用到。

    <div id="app">
        <span v-once>{{message}}</span>
    </div>
    <script>
        var app = new Vue( {
            el: "#app",
            data: {
                message: "你好，再见！"
            }
        } );
        app.message = "哇哈哈";
    </script>

## 5.6. v-if/v-else-if/v-else（条件渲染）

满足条件的将被渲染，不满足的将被移除。

可使用内置的`<template>`元素，最终的渲染结果不会包含该元素。

Vue在渲染元素时，会尽可能复用以后的元素而非重新渲染，
可使用key属性（值唯一）避免元素的复用。

    <div id="app">
        <p v-if="status === 1">111</p>
        <p v-else-if="status === 2">222</p>
        <p v-else>333</p>
    </div>
    <script>
        var app = new Vue( {
            el: "#app",
            data: {
                status: 0
            }
        } );
        // app.status = 0
    </script>

    <div id="app2">
        <template v-if="status === 1">
            <p>111</p>
        </template>
        <template v-else-if="status === 2">
            <p>222</p>
        </template>
        <template v-else>
            <p>333</p>
        </template>
    </div>
    <script>
        var app2 = new Vue( {
            el: "#app2",
            data: {
                status: 0
            }
        } );
        // app2.status = 0
    </script>

    <div id="app3">
        <input v-if="status === 1" placeholder="用户名">
        <input v-else-if="status === 2" placeholder="邮箱">
    </div>
    <script>
        var app3 = new Vue( {
            el: "#app3",
            data: {
                status: 1
            }
        } );
        // app3.status = 1
    </script>

    <div id="app4">
        <input v-if="status === 1" key="1" placeholder="用户名">
        <input v-else-if="status === 2" key="2" placeholder="邮箱">
    </div>
    <script>
        var app4 = new Vue( {
            el: "#app4",
            data: {
                status: 1
            }
        } );
        // app3.status = 1
    </script>

## 5.7. v-show

`v-show`与`v-if`的作用基本一致，
但`v-show`是改变内联样式`display`的值以达到显示/隐藏元素的。

    v-show="false" ==> style="display:none;"
    v-show="true" ==> style=""

`v-show`与`v-if`的比较：

`v-if`是条件渲染，它会根据表达式适当地销毁或重建元素 以及绑定事件，
当表达式的初始值为false时，不会渲染，只有当条件第一次变为真时才开始编译。
适用于条件不经常改变的场景，因为它切换开销相对较大。

`v-show`只是简单的CSS属性切换，无论条件是否为真，都会被编译。
适用于频繁切换条件。

## 5.8. v-for（列表渲染）

遍历数组、枚举对象。

语法：

    v-for="( item, index ) in items"
    v-for="( value, key, index ) in plainObject"

示例：

    <div id="app">
        <ul>
            <template v-for="(dept, _deptIndex) in deptList">
                <li>{{ _deptIndex }} - {{ dept.deptName }}</li>
            </template>
        </ul>
        <ul>
            <li v-for="( userValue, userKey, userIndex ) in user">
                {{ userIndex }} - {{ userKey }} - {{ userValue }}
            </li>
        </ul>
    </div>
    <script>
        var app = new Vue( {
            el: "#app",
            data: {
                deptList: [
                    { deptId: 1, deptName: "部门1" },
                    { deptId: 2, deptName: "部门2" },
                    { deptId: 3, deptName: "部门3" }
                ],
                user: {
                    name: "吴钦飞",
                    gender: "男"
                }
            }
        } );
    </script>

**数组更新**

调用改变原始数组的方法会重新渲染视图：
* `push()`
* `pop()`
* `shift()`
* `unshift()`
* `splice()`
* `sort()`
* `reverse()`

调用不改变原始数组的方法时，可使用计算属性：
* `filter()`
* `concat()`
* `slice()`

改变数组长度，通过索引改变原始值，不会触发视图更新：
* `app.books[ 2 ] = {...}` （可使用 `splice()` 方法解决）
* `app.books.length = 1`

## 5.9. v-model

表单控件（单选、多选、下拉选、输入框等）在业务中较为常见，
Vue提供了 `v-model` 指令，用于在表单类元素上双向数据绑定，
例如，在输入框上使用时，输入的内容会映射到绑定的数据上。

    <div id="app">
        <input type="text" v-model="message">
        <p>输入的内容：{{ message }}</p>
    </div>
    <script>
        var app = new Vue( {
            el: "#app",
            data: {
                message: ""
            }
        } );
    </script>

使用 `v-model` 后，表单控件显示的值只依赖所绑定的数据，
不在关心初始化时value属性的值。

### 5.9.1. 单选按钮

多个单选按钮，`v-model`配合`value`达到互斥的效果。

    <div id="app2">
        <label><input type="radio" v-model="gender" value="1"> 男</label>
        <label><input type="radio" v-model="gender" value="2"> 女</label>
        <div>性别：{{ gender }}</div>
    </div>
    <script>
        var app2 = new Vue( {
            el: "#app2",
            data: {
                gender: 2
            }
        } );
    </script>

### 5.9.2. 复选框

多个复选框，`v-model`配合`value`。

    <div id="app3">
        <label><input type="checkbox" v-model="fruits" value="apple"> 苹果</label>
        <label><input type="checkbox" v-model="fruits" value="orange"> 橙子</label>
        <div>水果：{{ fruits }}</div>
    </div>
    <script>
        var app3 = new Vue( {
            el: "#app3",
            data: {
                fruits: []
            }
        } );
    </script>

### 5.9.3. 下拉选

实际业务中不常用，因为下拉选的样式依赖平台和浏览器，无法统一且不太美观，
功能也受限，比如不支持搜索，所以通常都是使用自定义的下拉组件。

    <div id="app4">
        <select v-model="selected">
            <option value="HTML">HTML</option>
            <option value="JS">JS</option>
            <option value="CSS">CSS</option>
        </select>
        <div>选择了：{{ selected }}</div>
    </div>
    <script>
        var app4 = new Vue( {
            el: "#app4",
            data: {
                selected: "JS"
            }
        } );
    </script>

### 5.9.4. 修饰符

`v-model` 也有修饰符，用于控制数据同步的时机。

`.lazy`

    在输入空中，`v-model`默认是在 input事件 中同步输入框的数据，
    使用 `.lazy`修饰符会变为在 change事件 中同步。

    也就是说将实时改变 变为 在失去焦点或按回车时才更新。

`.number`

    输入框中输入的字符默认都是字符串，可通过`.number`修饰符将其变为数字。

`.trim`

    过滤输入的首尾空格。

**示例：**

    <div id="app5">
        <!-- 失去焦点时同步  -->
        <input type="text" v-model.lazy="message_lazy">
        <p>{{ message_lazy }}</p>

        <!-- 将输入转换成number类型  -->
        <input type="text" v-model.number="message_number">
        <p>{{ message_number }}</p>

        <!-- 过滤首尾空格  -->
        <input type="text" v-model.trim="message_trim">
        <p>{{ message_trim }}</p>
    </div>
    <script>
        var app5 = new Vue( {
            el: "#app5",
            data: {
                message_lazy: "",
                message_number: 123,
                message_trim: " a "
            }
        } );
    </script>


# 6. 事件

通过 `v-on:事件类型="表达式"` 指令完成事件处理器的绑定。

**表达式**

可以直接使用JavaScript语句。

也可以使用Vue实例的方法，方法若没有参数则可省略括号，
可使用特殊变量`$event`访问原始DOM事件

    <div id="app">
        点击次数：{{ counter }}
        <button v-on:click="counter++">+1</button>
        <button v-on:click="handleAdd( $event )">+2</button>
    </div>
    <script>
        var app = new Vue( {
            el: "#app",
            data: {
                counter: 0
            },
            methods: {
                handleAdd: function( event ) {
                    console.info( event );
                    // event.preventDefault();
                    this.counter += 2;
                }
            }
        } );
    </script>

## 6.1. 修饰符

语法：`v-on:事件.修饰符1.修饰符2="表达式"`

Vue支持以下修饰符：
* `.stop`：阻止冒泡，`event.stopPropagation()`
* `.prevent`：取消默认行为，`event.preventDefault()`
* `.capture`：添加事件侦听器时使用事件捕获模式
* `.self`：当事件在该元素本身（而不是子元素）触发时触发回调
* `.once`：只触发一次

示例：

    <form v-on:submit.prevent></form>
    <a v-on:click.prevent.stop="handleClick"></a>

    <!-- 当keyCode是13时触发 -->
    <input v-on:keyup.13="submit">

可配置具体按键：

    // 全局定义
    Vue.config.keyCodes.f1 = 112;
    // 使用
    @keyup.f1

监听键盘事件时，可使用按键修饰符：
* `.enter`
* `.tab`
* `.delete`
* `.esc`
* `.space`
* `.up`
* `.down`
* `.left`
* `.right`
* `.ctrl`
* `.alt`
* `.shift`
* `.meta`（Mac下是Command键，Windows下是窗口键）






