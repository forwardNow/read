 # 引言

## 1. Web标准

### 1.1. 标准的制定过程

W3C 并不“生产”标准，它扮演的是一个论坛的角色:
W3C 以工作组的方式，把某项技术的相关各方聚集起来，最终由他们来产出标准。

CSS 规范通常是由 CSS 工作组的成员来编写的，人员结构如下：
* 86 名来自 W3C 会员公司的成员(88%)
* 7 名特邀专家(笔者有幸在列)(7%)
* 5 名 W3C 工作人员(5%)

**W3C 会员公司**
 
W3C 会员公司：浏览器厂商、主流网站、研究机构、常规技术公司等。

他们是 Web 标准兴旺发展的直接受益者。

它们每年的会费也是 W3C 的主要资金来源，使得 W3C 能够免费、开放地发布所有技术规范。

对于哪些东西该进入标准，浏览器厂商比 W3C 有更多的发言权。

**每项规范从最初启动到最终成熟，都会经过以下阶段**：
1. 编辑草案(ED)
2. 首个公开工作草案(FPWD)
3. 工作草案(WD)
4. 候选推荐规范(CR)
5. 提名推荐规范(PR)
6. 正式推荐规范(REC)


### 1.2. CSS3、CSS4

**CSS 1**

发表于 1996 年，68 页 A4 纸

**CSS 2**

发表于 1998 年，定义更加严格，囊括了更多的功能，480 页打印纸

**CSS3**

在 CSS 2 之后，CSS 工作组意识到这门语言已经变得非常庞大，再也无法把它塞进单个规范中了。
这样不仅阅读和编辑极其困难，而且限制了 CSS 本身的快速发展。

因此，将 CSS 打散到多个不同的规范（模块）中，每个模块都可以独立更新版本。

那些延续 CSS 2.1 已有特性的模块 会升级到 3 这个版本号。比如以下模块:
* CSS 语法（ http://w3.org/TR/css-syntax-3 ）
* CSS 层叠与继承（ http://w3.org/TR/css-cascade-3)
* CSS 颜色（ http://w3.org/TR/css3-color ） 
* 选择符（http://w3.org/TR/selectors）
* CSS 背景与边框（http://w3.org/TR/css3-background）
* CSS 值与单位（http://w3.org/TR/css-values-3）
* CSS 文本排版（http://w3.org/TR/css-text-3）
* CSS 文本装饰效果（http://w3.org/TR/css-text-decor-3）
* CSS 字体（http://w3.org/TR/css3-fonts）
* CSS 基本 UI 特性（http://w3.org/TR/css3-ui）

**新概念/新规范**

如果某个模块是前所未有的新概念，那它的版本号将从 1 开始。 比如下面这些:
* CSS 变形(http://w3.org/TR/css-transforms-1)
* 图像混合效果(http://w3.org/TR/compositing-1)
* 滤镜效果(http://w3.org/TR/filter-effects-1)
* CSS 遮罩(http://w3.org/TR/css-masking-1)
* CSS 伸缩盒布局(http://w3.org/TR/css-flexbox-1)
* CSS 网格布局(http://w3.org/TR/css-grid-1)

尽管“CSS3”这个名词非常流行，但它实际上并没有在任何规范中定义过。

“CSS3”指的是一个非正式的集合，
它包括 CSS 规范第三版(Level 3)再加上一些版本号还是 1 的新规范。

由于 CSS 的各个模块在近些年里以不同的速度在推进，
我们已经越来越难以把这些规范以 CSS3、CSS4 这样的方式来划分了，
而且这样也难以被大众理解和接受。

### 1.3. 浏览器前缀

**滥用浏览器前缀**

开发者人地加上所有可能的浏览器前缀，再把无前缀的版本放在最后，以图一劳永逸。
我们最终写出的代码可能就是这样的:

    -moz-border-radius: 10px; 
    -ms-border-radius: 10px; 
    -o-border-radius: 10px; 
    -webkit-border-radius: 10px; 
    border-radius: 10px;


这里面有两条声明是完全多余的: `-ms-border-radius` 和 `-o-border-radius `。
这两个属性从来没有在任何浏览器中出现过，
因为 IE 和 Opera 从一 开始就是直接实现 `border-radius` 这个无前缀版本的。

把每个声明都重复五遍是相当枯燥的，而且很难维护。
因此出现某个工具来把这项工作自动化：
* Autoprefixer(https://github.com/ai/autoprefixer)采用 Can I Use... (http://caniuse.com)的数据库来判断哪些前缀是需要添加的;此外，它是在本地完成编译的，类似预处理器。
* -prefix-free(http://leaverou.github.io/prefixfree)会在浏览器中进行特性检测，来决定哪些前缀是需要的。
*  Stylus(http://stylus-lang.com/)、LESS(http://lesscss.org) 或 Sass(http://sass-lang.com)的预处理器并不自带任何加前缀的方法， 但很多人开发过一些能为常用属性加前缀的 mixin;社区中也有一些 库提供了这类 mixin。

## 2. CSS 编码技巧

### 2.1. 尽量减少代码重复

在软件开发中，保持代码的 DRY 和可维护性是最大的挑战之一，而这句话对 CSS 也是适用的。

在实践中，代码可维护性的最大要素是尽量减少改动时要编辑的地方。

举例来说，如果在放大一个按钮时需要在一堆规则中进行 10 处修改，那就很可能会漏改其中某处，当你在给别人善后时更是如此。即使这些要修改的地方很明显，或者最终可以找齐它们，但你还是浪费了时间，原本可以利用这些时间来做点更有意义的事情。

而且，这还不仅仅是后期修改的问题。灵活的 CSS 通常更容易扩展: 在写出基础样式之后，只用极少的代码就可以扩展出不同的变体，因为只需覆盖一些变量就可以了。



