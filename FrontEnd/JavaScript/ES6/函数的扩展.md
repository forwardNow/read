# 函数的扩展

## 1. 函数参数的默认值

### 1.1. 基本用法

ES6 之前，不能直接为函数的参数指定默认值，只能采用变通的方法。

```javascript
function log(x, y) {
  // 如果 y 赋值了，但为假值（如 false、0、''），就可以能出错
  y = y || 'World';
  console.log(x, y);
}

// 为了避免这个问题，通常需要先判断一下参数y是否被赋值，如果没有，再等于默认值。

if (typeof y === 'undefined') {
  y = 'World';
}
```

ES6 允许为函数的参数设置默认值，即直接写在参数定义的后面。

```javascript
function log(x, y = 'World') {
  console.log(x, y);
}
```

如果传入 `undefined`，将触发该参数等于默认值，`null` 则没有这个效果。

```javascript
function foo(x = 5, y = 6) {
  console.log(x, y);
}

foo(undefined, null)
// 5 null
```

### 1.2. 与解构赋值默认值结合使用

参数默认值可以与解构赋值的默认值，结合起来使用。

```javascript
function foo({x, y = 5}) {
  console.log(x, y);
}

foo({}) // undefined 5
foo() // TypeError: Cannot read property 'x' of undefined
```

如果没给 `foo` 函数传对象参数，则会发生解构错误，通过给对象参数赋予默认值来避免：

```javascript
function foo({x, y = 5} = {}) {
  console.log(x, y);
}

foo() // undefined 5
```

### 1.3. 参数默认值的位置

通常情况下，定义了默认值的参数，应该是函数的尾参数。

如果非尾部的参数设置默认值，实际上这个参数是没法省略的。

```javascript
function f(x = 1, y) {
  return [x, y];
}

f() // [1, undefined]
f(2) // [2, undefined])
f(, 1) // 报错
f(undefined, 1) // [1, 1]
```
