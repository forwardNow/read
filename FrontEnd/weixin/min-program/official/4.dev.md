# 第 4 章 场景应用

在本章我们会介绍小程序的基本开发流程，结合第 2 章和第 3 章的知识，足以让你独立完成一个体验很完善的小程序。为了让开发者更加了解小程序开发，在这章中我们还会通过常见的一些应用场景介绍小程序 API 一些细节，及开发的一些技巧和注意事项。

## 1. 开发流程基本介绍

在启动开发前，首先我们对整个小程序整体的产品体验有一个清晰的规划和定义，一般会通过交互图或者手稿描绘小程序的界面交互和界面之间的跳转关系。图 4-1 是一个管理文章留言小程序的交互图。

图 4-1 文章留言管理的交互图：

* ![图4-1 文章留言管理的交互图](./images/4.1.png)

紧接着，我们优先完成 WXML + WXSS 还原设计稿，把界面涉及到的元素和视觉细节先调试完成。最后我们把按照页面交互梳理出每个页面的 data 部分，填充 WXML 的模板语法，还有完成 JS 逻辑部分。

当然并不是要完全按照这样的开发流程来开发小程序，有些时候我们可能在产品交互体验还不明确的情况下，先完成JS逻辑层一些模块的工作并做好测试。高效的开发流程有很多种方式，一般是根据整个团队的工作节奏来选择和开展，我们这一节讨论到的流程只是其中常见的开发流程。

## 2. 基本的布局方法 —— Flex 布局

如果之前你接触过网页开发中的 flexbox 布局，基本上你可以略过这节。但有一点需要注意的是，你的小程序要求兼容到 iOS8 以下版本，需要开启样式自动补全。开启样式自动补全，在“设置”—“项目设置”—勾选“上传代码时样式自动补全”。

图 4-2 开发者工具开启样式自动补全：

* ![图4-2 开发者工具开启样式自动补全](./images/4.2.png)

在小程序开发中，我们需要考虑各种尺寸终端设备上的适配。在传统网页开发，我们用的是盒模型，通过 `display:inline | block | inline-block`、 `position`、`float` 来实现布局，缺乏灵活性且有些适配效果难以实现。比如像下面这种常见的信息列表，要求内容高度不确定下保持垂直居中：

图 4-3 常见的信息列表排版方式:

* ![图4-3 常见的信息列表排版方式](./images/4.3.png)

这种情况下，我们更建议用 flex 布局。

在开始介绍 flex 之前，为了表述方便，我们约定以下术语：采用 flex 布局的元素，简称为“容器”，在代码示例中以 container 表示容器的类名。容器内的元素简称为“项目”，在代码示例中以 item 表示项目的类名。

图 4-4 container 容器和 item 项目：

* ![图4-4 container容器和item项目](./images/4.4.png)
