# 第 1 章 浏览器和浏览器内核

浏览器是目前用户使用范围最广、使用时间最长的应用程序之一。伴随这浏览器发展的是浏览器内核，它是浏览器中最核心的功能部件。本章基础性地介绍浏览器和浏览器内核等概念，引入 WebKit 内核的特征分析和框架概述。

## 1. 浏览器

### 1.1. 浏览器简介

互联网的革命浪潮带动了众多技术的快速发展，其中，网络浏览器（简称浏览器）作为互联网最重要的终端接口之一在短短的二十多年时间里日新月异，特别是 21 世纪，越来越多的功能被加入到浏览器中来。在 W3C 的积极推动下的 HTML 5 技术，更是称为了浏览器发展的火箭推进器。

* WorldWideWeb。世界上第一个浏览器，后改名为 Nexus；Berners-Lee（W3C 理事）20 世纪 90 年代初期发明的；在 1991 年开放源码。
* Mosaic。在 1993 年诞生，也就是后来鼎鼎大名的网景（Netscape）浏览器
* Internet Explorer（简称 IE）。在 1995 年诞生，由微软推出，第一次浏览器大战正式打响；IE 得益于 Windows 操作系统，获得了空前的成功，逐渐取代了网景浏览器的领导地位；网景浏览器的消亡，标志着第一次浏览器大战的结束。
* Firefox。网景公司在 1998 年成立 Mozilla 基金会，开发了著名的开源项目火狐浏览器；在 2004 年发布 1.0 版本，拉开了第二次浏览器大战的序幕；得益于 IE 浏览器的缓慢发展，Firefox 大受欢迎。
* Safari。2003 年，苹果公司发布了 Safari 浏览器；2005 年发起了新的开源项目 WebKit（Safari 浏览器内核），拉开了一个新序幕。
* Chrome。2008 年，Google 公司以 WebKit 作为内核，创建了一个新的项目 Chromium 浏览器，在 Chromium 的基础上发布了自己的浏览器产品 Chrome；Chromium 是开源试验场，Chrome 选择 Chromium 的稳定版作为基础。

自此，对于桌面系统而言，三足鼎立之势已成：微软 IE、Mozilla 火狐、谷歌 Chrome。对于移动系统而言，谷歌的安卓、苹果的 iOS占据绝对领导地位。

### 1.2. 浏览器特性

目前一个浏览器应该包括哪些功能呢？大体上来讲，包括：

* 网络
* 资源管理
* 网页浏览
* 多页面管理
* 插件和扩展
* 书签管理
* 历史记录管理
* 设置管理
* 下载管理
* 账户和同步
* 安全机制
* 隐私管理
* 外观主题
* 开发者工具

下面对他们中一些重要功能进行详细介绍：

* **网络**：它是第一步，浏览器通过网络模块来下载各种资源，如 HTML、文本、JavaScript 文件、样式表、图标、影视频文本等。网络部分非常重要，因为它耗时比较长且需要安全访问互联网上的资源。
* **资源管理**：从网络下载或者本地获取资源，并将它们管理起来，这需要高效的管理机制。如避免重复下载资源、缓存资源等，都是它们要解决的问题。
* **网页浏览**：这是浏览器的核心也是最基本最重要的功能，它从资源管理器获取资源，并将它们转变为可视化的结果，这是浏览器内核最重要的功能。
* **多页面管理**：很多浏览器支持多页面管理浏览，所以需要支持多个网页同时加载，这让浏览器变得更为复杂。同时，如何解决多页面的相互影响和安全等问题也非常重要。
* **插件和扩展**：这是现代浏览器的一个重要特征，它们不仅能显示网页，而且能支持各种形式的插件和扩展。插件是用来显示网页特定内容的，而扩展则是增强浏览器新功能的软件或压缩包。常见的插件有 NPAPI 插件、PPAPI 插件、ActiveX 插件等，扩展则跟浏览器密切相关，常见的有 Firefox 扩展和 Chromium 扩展。
* **账户和同步**：将浏览器的相关信息、如历史记录、书签等信息同步到服务器，给用户一个多系统下统一的体验，这对用户非常友好，是浏览器易用性的一个显著标志。
* **安全机制**：本质是提供一个安全的浏览器环境，避免用户信息被各种非法工具窃取和破坏。这可能包括显示用户访问的网站是否安全、为网站设置安全级别、防止浏览器被恶意代码破坏等。
* **开发者工具**：帮助审查 HTML 元素、调试 JavaScript 代码、改善网页性能等。

浏览器的多操作系统支持：

|         | IE   | Firefox | Chrome           | Safari |
| ------- | ---- | ------- | ---------------- | ------ |
| Windows | √    | √       | √                | ×      |
| Mac OS  | ×    | √       | √                | √      |
| Linux   | ×    | √       | √                | ×      |
| Android | ×    | √       | √                | ×      |
| iOS     | ×    | ×       | √（iOS默认内核）   | √      |
