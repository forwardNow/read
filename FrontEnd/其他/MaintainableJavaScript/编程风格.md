# 编程风格

>程序是写给人读的，只是偶尔让计算机执行以下。

**编程嗜好**：

每个人的背景不同，会有自己的一套编程习惯，都觉得代码应该按照自己的想法来写，这称为编程嗜好。

**编程风格**：

编程风格（style guideline）是编码规范（code convention）的一部分，用来规范单文件中代码的规划。

编码规范包括：编程最佳实践、文件和目录的规划、注释等方面。

**为什么要讨论编程风格问题**：

一旦风格确定后，这套编程风格就会促成团队成员高水准的协作，因为所有代码的风格看起来极为类似。

在团队开发中，所有的代码看起来风格一致是极其重要的：

* 提高效率：阅读别人代码不需要花费额外的精力去理解代码逻辑并重新排版
* 容易识别错误：所有代码开起来很像，当你看到一段与众不同的代码时，很可能错误就产生在这段代码中

全球性的大公司都对内或对外发布过编程风格文档。

编程风格是个人的事，只有放到团队开发中才能发挥作用。

**工具**：

使用工具来检查编程风格：

* JSLint，由 Douglas Crockford 创建，通用的工具，很严格。
* JSHint，是 JSLint 的一个分支项目，更人性化。

## 1. 第 1 章

>编程风格指南的核心是基本的格式化规则（formatting rule）。这些规则直接决定了如何编写高水准的代码。与写字时所用的方格纸类似。

### 1.1. 缩进层级

两种缩进方式：

* 制表符（tab character）
  * 好处
    * 一个制表符一个缩进层级，一对一的关系
    * 文本编辑器可以配置制表符的展现长度
  * 坏处
    * 系统对制表符的解释不一致，有的长有的短
* 空格：每个缩进层级由多个空格字符组成，2 或 4 或 8 空格代表一个层级
  * 好处：所有的系统和编辑器中，文件的展现格式不会有差异
  * 坏处：需要配置编辑器的 Tab 键插入的空格数量

缩进风格参考：

* jQuery Core Style Guide: 制表符
* Douglas Crockford's Code Conventions for the JavaScript Programming Language: 4 个空格
* SproutCore Style Guide: 2 个空格
* Google JavaScript Guide: 2 个空格
* Dojo Style Guide: 制表符

推荐：

* 使用 4 个空格作为一个缩进，很多编辑器默认的缩进设置为 4 个空格
* 使用 2 个空格，代码的视觉展现并不是最优的

注意：

* 选择制表符还是空格做缩进只是个人的偏好，但是绝对不要混用

### 1.2. 语句结尾

JavaScript 的语句要么独占一行，要么以分号结尾。

有赖于分析器的动分号插入机制（Automatic Semicolon Insertion，ASI），JavaScript 代码省略分号也是可以正常工作的。

但当某个场景我们任务不需要插入分号而 ASI 认为需要插入时，常常会产生错误。

### 1.3. 行的长度

如果一行代码太长，编辑窗口出现了横向滚动条，会让开发人员感觉很别扭。

很多语言的编程规范都提到了一行代码最长不应该超过 80 个字符。这个数值来源于很久之前文本编辑器的单行最多字符限制，即编辑器中单行最多只能显示 80 个字符，超过 80 个字符的行要么折行，要么被隐藏起来。

### 换行

当一行长度达到了单行最大字符数限制时，就需要手动将一行拆成两行。
