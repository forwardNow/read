# 编程实践

## 1. x1

## 2. x2

## 3. x3

## 4. x4

## 5. x5

## 6. 第 6 章 避免使用全局变量

JavaScript 执行环境在很多方面都有其独特之处。全局变量和函数的使用便是其中之一。

JavaScript 的初始执行环境是由多种多样的全局变量所定义的，这些全局变量在脚本环境创建之初就已经存在了。

我们说这些都是挂载在“全局对象”（global object）上的，“全局对象”是一个神秘的对象，它表示了脚本的最外层上下文。

在浏览器中，`window` 对象往往重载并代理了全局对象，因此任何在全局作用域中声明的变量和函数都是 `window` 对象的属性，比如：

```javascript
var color = 'red';

function getColor() {
  return color;
}

console.log(window.color);
consoel.log(window.getColor());
```

`color`、`getColor` 都是 `window` 对象的属性，即使没有显式挂载。

### 6.1. 全局变量带来的问题

创建全局变量是糟糕的实践。全局变量越多，引入错误的概率将会因此变得越来越高。

#### 6.1.1. 命名冲突

当脚本中的全局变量和全局函数越来越多时，发生命名冲突的概率也随之增高。

所有变量都被定义为局部变量，这样代码才是最容易维护的。

全局函数、全局变量如果分隔到不同的文件，其依赖关系很难追踪到：

```javascript
function getColor() {
  return color; // color 是哪里来的？
}
```

全局环境是用来定义 JavaScript 内置对象的地方，如果你在全局环境定义了变量，则很可能与浏览器附带的内置变量冲突。